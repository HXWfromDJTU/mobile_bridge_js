{"version":3,"sources":["webpack://MobileBridge/webpack/universalModuleDefinition","webpack://MobileBridge/./node_modules/_eventemitter3@4.0.7@eventemitter3/index.js","webpack://MobileBridge/./node_modules/_lodash.uniqueid@4.0.1@lodash.uniqueid/index.js","webpack://MobileBridge/./node_modules/_loglevel@1.7.0@loglevel/lib/loglevel.js","webpack://MobileBridge/./src/MobileBridge.ts","webpack://MobileBridge/./src/api/BaseAPI.ts","webpack://MobileBridge/./src/api/TestModule.ts","webpack://MobileBridge/./src/api/index.ts","webpack://MobileBridge/./src/channel/IframeChannel.ts","webpack://MobileBridge/./src/channel/NativeChannel.ts","webpack://MobileBridge/./src/constant/index.ts","webpack://MobileBridge/./src/constant/rescode.ts","webpack://MobileBridge/./src/helper/index.ts","webpack://MobileBridge/./src/index.ts","webpack://MobileBridge/webpack/bootstrap","webpack://MobileBridge/webpack/startup","webpack://MobileBridge/webpack/runtime/global"],"names":["root","factory","exports","module","define","amd","self","has","Object","prototype","hasOwnProperty","prefix","Events","EE","fn","context","once","this","addListener","emitter","event","TypeError","listener","evt","_events","push","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","name","names","call","slice","getOwnPropertySymbols","concat","listeners","handlers","i","l","length","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","freeGlobal","g","freeSelf","Function","objectProto","idCounter","objectToString","toString","Symbol","symbolProto","symbolToString","value","id","isObjectLike","isSymbol","result","baseToString","definition","noop","undefinedType","isIE","window","navigator","test","userAgent","logMethods","bindMethod","obj","methodName","method","bind","e","traceForIE","console","log","trace","realMethod","replaceLoggingMethods","level","loggerName","methodFactory","debug","enableLoggingWhenConsoleArrives","defaultMethodFactory","Logger","defaultLevel","currentLevel","storageKey","getPersistedLevel","storedLevel","localStorage","ignore","cookie","document","location","indexOf","encodeURIComponent","exec","levels","getLevel","setLevel","persist","toUpperCase","SILENT","levelNum","levelName","persistLevelIfPossible","setDefaultLevel","enableAll","TRACE","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","logger","_log","noConflict","getLoggers","extendStatics","__extends","d","b","setPrototypeOf","p","__","constructor","defineProperty","IframeChannel_1","LoggerLevel","helper_1","constant_1","rescode_1","NativeChannel_1","uniqueId","MobileBridge","_super","apiDict","_this","SDK_NAME","_promises","Map","isIframeEnv","_channel","IframeChannel","onmessage","data","includes","JSON_RPC_KEY","JSON_RPC_VERSION","response","NativeChannel","NativeSDKGlobalKey","_i","_a","keys","key","_roundTripTimer","setInterval","entries","_b","callbackPromise","Date","getTime","createdAt","warn","EXPIRE_DURATION","HEARTBEAT_DURATION","message","JSON","parse","err","error","isNotify","NOTIFY_PREFIX","isRequest","params","isResponse","errCode","data_1","errMsg","get","delete","RES_CODE","success","resolve","reject","request","payload","Promise","assign","set","postMessage","default","BaseAPI","bridge","_bridge","_request","TestModule","sendTestMessage","API","testApi","parent","useChannelName","isIOS","isAndroid","UAInfo","getAllUserAgent","ios","android","_c","webkit","messageHandlers","iframe_1","createElement","setAttribute","dataToString","body","appendChild","setTimeout","removeChild","stringify","TEST_API_KEY","msgObj","every","requestKey","top","ua","toLowerCase","windows","ubuntu","mac","MobileBridge_1","api_1","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","globalThis"],"mappings":"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","file":"mobile_bridge_js.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MobileBridge\"] = factory();\n\telse\n\t\troot[\"MobileBridge\"] = factory();\n})(self, function() {\nreturn ","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nmodule.exports = uniqueId;\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter = require(\"eventemitter3\");\nvar IframeChannel_1 = require(\"./channel/IframeChannel\");\nvar LoggerLevel = require(\"loglevel\");\nvar helper_1 = require(\"./helper\");\nvar constant_1 = require(\"./constant\");\nvar rescode_1 = require(\"./constant/rescode\");\nvar NativeChannel_1 = require(\"./channel/NativeChannel\");\nvar uniqueId = require('lodash.uniqueid');\nvar MobileBridge = /** @class */ (function (_super) {\n    __extends(MobileBridge, _super);\n    function MobileBridge(apiDict) {\n        var _this = _super.call(this) || this;\n        _this.logger = LoggerLevel.getLogger(constant_1.SDK_NAME);\n        _this._promises = new Map();\n        _this.apiDict = apiDict ? apiDict : {};\n        // 初始化信道\n        if (helper_1.isIframeEnv()) {\n            console.debug(constant_1.SDK_NAME + \".init: use IframeChannel\");\n            // 发消息\n            _this._channel = new IframeChannel_1.IframeChannel(console);\n            // 接收消息\n            window.onmessage = function (event) {\n                _this.logger.debug(constant_1.SDK_NAME + \"-iframe-receive message, ready to handle\", event);\n                if (event.data\n                    && typeof event.data === 'string'\n                    && event.data.includes(\"\\\"\" + constant_1.JSON_RPC_KEY + \"\\\":\\\"\" + constant_1.JSON_RPC_VERSION + \"\\\"\")) {\n                    // 向子页面传递消息 (向下传递)\n                    _this.response(event.data);\n                }\n            };\n        }\n        else {\n            console.debug(constant_1.SDK_NAME + \".init: use NativeChannel\");\n            // 使用 native channel 封装 各平台的 webview postMessage 的api\n            _this._channel = new NativeChannel_1.NativeChannel(constant_1.NativeSDKGlobalKey, console);\n        }\n        // 绑定 API_DICT 实例到 Bridge 上\n        for (var _i = 0, _a = Object.keys(_this.apiDict); _i < _a.length; _i++) {\n            var key = _a[_i];\n            // 实例化api, 并使用 MobileBridge 作为信道，并绑定到全局\n            _this[key] = new _this.apiDict[key](_this);\n        }\n        // 添加请求 RTT 过长警告  todo: 清理计时器\n        _this._roundTripTimer = setInterval(function () {\n            for (var _i = 0, _a = _this._promises.entries(); _i < _a.length; _i++) {\n                var _b = _a[_i], msgId = _b[0], callbackPromise = _b[1];\n                var RTT = new Date().getTime() - callbackPromise.createdAt.getTime();\n                if (RTT) {\n                    _this.logger.warn(constant_1.SDK_NAME + \"-checking: request RTT is over \" + constant_1.EXPIRE_DURATION + \", method: \", callbackPromise.method);\n                }\n            }\n        }, constant_1.HEARTBEAT_DURATION);\n        return _this;\n    }\n    MobileBridge.prototype.response = function (data) {\n        // 尝试转换为 JSON 格式消息\n        var message;\n        try {\n            message = JSON.parse(data);\n            this.logger.debug(constant_1.SDK_NAME + \"-response receive:\", data);\n        }\n        catch (err) {\n            this.logger.error(constant_1.SDK_NAME + \"-response parse data error.\", data);\n            return;\n        }\n        if (helper_1.isNotify(message)) {\n            var id = message.id, event = message.event;\n            this.logger.debug(constant_1.SDK_NAME + \": receive \" + event + \" notify\", id);\n            // 收到请求，使用事件机制对外暴露\n            this.emit(constant_1.NOTIFY_PREFIX + \":\" + event, data);\n            return;\n        }\n        // 该消息为 请求类型 的消息\n        if (helper_1.isRequest(message)) {\n            var id = message.id, method = message.method, params = message.params;\n            this.logger.debug(constant_1.SDK_NAME + \": receive request\", id);\n            // 收到请求，使用事件机制对外暴露\n            this.emit(constant_1.NOTIFY_PREFIX + \":\" + method, params);\n            return;\n        }\n        // 该消息为 响应类型 的消息\n        if (helper_1.isResponse(message)) {\n            var id = message.id, errCode = message.errCode, data_1 = message.data, errMsg = message.errMsg;\n            // 从请求记录中，找到请求时设定的promise处理\n            var callbackPromise = this._promises.get(id);\n            if (callbackPromise) {\n                // 判断是否超时,给出警告\n                var RTT = new Date().getTime() - callbackPromise.createdAt.getTime();\n                if (RTT > constant_1.EXPIRE_DURATION) {\n                    this.logger.warn(constant_1.SDK_NAME + \"-response: receive response more than \" + constant_1.EXPIRE_DURATION + \"s\");\n                }\n                // 移除对对应的promise\n                this._promises.delete(id);\n                this.logger.debug(constant_1.SDK_NAME + \"-response, remove callback promise, id = \" + id);\n                // 执行对应的callback promise\n                if (errCode === rescode_1.RES_CODE.success) {\n                    this.logger.debug(constant_1.SDK_NAME + \"-response: response data\", data_1);\n                    // 调用 reject 方法处理异常回复\n                    callbackPromise.resolve.call(this, data_1);\n                }\n                else {\n                    this.logger.debug(constant_1.SDK_NAME + \"-response: received error\", errMsg);\n                    // 调用 resolve 方法处理正常回复\n                    callbackPromise.reject.call(this, errMsg);\n                }\n            }\n            else {\n                // 发现是 response 消息，但本地没有找到 对应请求 promise 记录\n                this.logger.error(constant_1.SDK_NAME + \"-response, no promise for this message\", message);\n                return;\n            }\n        }\n    };\n    /**\n     * 发送消息\n     * @param payload 发送的数据体\n     * @param isNotify\n     */\n    MobileBridge.prototype.request = function (payload, isNotify) {\n        var _this = this;\n        if (isNotify === void 0) { isNotify = false; }\n        return new Promise(function (resolve, reject) {\n            var _a;\n            // 包装请求\n            payload = Object.assign(payload, (_a = {\n                    id: isNotify ? constant_1.NOTIFY_PREFIX : uniqueId(constant_1.SDK_NAME + \"-\")\n                },\n                _a[constant_1.JSON_RPC_KEY] = constant_1.JSON_RPC_VERSION,\n                _a));\n            // 若发送的不是一个 通知类型 的消息，则需要记录其处理方式\n            if (!isNotify) {\n                _this.logger.debug(constant_1.SDK_NAME + \"-request add callback promise, id =\", payload.id);\n                // 使用 Map 保存请求对应的处理promise\n                _this._promises.set(payload.id, {\n                    resolve: resolve,\n                    reject: reject,\n                    method: payload.method,\n                    createdAt: new Date(),\n                });\n            }\n            _this.logger.debug(constant_1.SDK_NAME + \"-request message will be sent, payload =\", payload);\n            _this._channel.postMessage(payload);\n        });\n    };\n    return MobileBridge;\n}(EventEmitter));\nexports.default = MobileBridge;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseAPI = void 0;\nvar BaseAPI = /** @class */ (function () {\n    function BaseAPI(bridge) {\n        this._bridge = bridge;\n    }\n    BaseAPI.prototype._request = function (payload, isNotify) {\n        if (isNotify === void 0) { isNotify = false; }\n        return this._bridge.request(payload, isNotify);\n    };\n    return BaseAPI;\n}());\nexports.BaseAPI = BaseAPI;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseAPI_1 = require(\"./BaseAPI\");\nvar TestModule = /** @class */ (function (_super) {\n    __extends(TestModule, _super);\n    function TestModule() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TestModule.prototype.sendTestMessage = function () {\n        return this._request({\n            method: 'test_method',\n            params: {}\n        });\n    };\n    return TestModule;\n}(BaseAPI_1.BaseAPI));\nexports.default = TestModule;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TestModule_1 = require(\"./TestModule\");\nvar API = {\n    testApi: TestModule_1.default\n};\nexports.default = API;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IframeChannel = void 0;\nvar constant_1 = require(\"../constant\");\nvar IframeChannel = /** @class */ (function () {\n    function IframeChannel(logger) {\n        this.logger = logger;\n    }\n    IframeChannel.prototype.postMessage = function (data) {\n        this.logger.debug(constant_1.SDK_NAME + \"-try sending through IframeChannel\");\n        // 将消息向父容器转发过去 (向外层传递)\n        window.parent.postMessage(data, '*'); // 不限制接收源\n    };\n    return IframeChannel;\n}());\nexports.IframeChannel = IframeChannel;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NativeChannel = void 0;\nvar helper_1 = require(\"../helper\");\nvar constant_1 = require(\"../constant\");\nvar NativeChannel = /** @class */ (function () {\n    /**\n     *\n     * @param useChannelName 当前用于通信的信道对象，在window上的key值\n     * @param logger\n     */\n    function NativeChannel(useChannelName, logger) {\n        this.isIOS = false;\n        this.isAndroid = false;\n        var UAInfo = helper_1.getAllUserAgent();\n        this.logger = logger;\n        this.useChannelName = useChannelName;\n        this.isIOS = UAInfo.ios;\n        this.isAndroid = UAInfo.android;\n    }\n    NativeChannel.prototype.postMessage = function (data) {\n        var _a, _b, _c;\n        if (this.isAndroid) {\n            this.logger.debug(constant_1.SDK_NAME + \"-try sending through Android NativeChannel\", data);\n            var bridge = window[this.useChannelName]; // window[this.useChannelName] 指向的是 Android 端绑定的对象\n            if (bridge && bridge.postMessage) {\n                bridge.postMessage(data);\n            }\n            else {\n                this.logger.error(constant_1.SDK_NAME + \"-NativeChannel Android: bridge not found in window, name =\", this.useChannelName);\n            }\n        }\n        else if (this.isIOS) {\n            this.logger.debug(constant_1.SDK_NAME + \"-try sending through iOS NativeChannel\", data);\n            if ((_c = (_b = (_a = window.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b[this.useChannelName]) === null || _c === void 0 ? void 0 : _c.postMessage) {\n                window.webkit.messageHandlers[this.useChannelName].postMessage(data);\n            }\n            else {\n                // 使用新开页面的形式，客户端端通过约定的 schema，从URL中获取传递的参数\n                var iframe_1 = document.createElement('iframe');\n                iframe_1.setAttribute('src', \"mobile-bridge://\" + this.useChannelName + \"?data=\" + NativeChannel.dataToString(data));\n                iframe_1.setAttribute('style', 'display: none');\n                document.body.appendChild(iframe_1);\n                setTimeout(function () {\n                    document.body.removeChild(iframe_1);\n                }, 100);\n            }\n        }\n        else {\n            this.logger.error(constant_1.SDK_NAME + \"-NativeChannel platform not supported, userAgent = \", window.navigator.userAgent);\n        }\n    };\n    NativeChannel.dataToString = function (data) {\n        return typeof data === 'string' ? data : JSON.stringify(data);\n    };\n    return NativeChannel;\n}());\nexports.NativeChannel = NativeChannel;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HEARTBEAT_DURATION = exports.NOTIFY_PREFIX = exports.EXPIRE_DURATION = exports.JSON_RPC_KEY = exports.JSON_RPC_VERSION = exports.NativeSDKGlobalKey = exports.TEST_API_KEY = exports.SDK_NAME = void 0;\nexports.SDK_NAME = 'MobileBridge';\nexports.TEST_API_KEY = 'API_TEST';\nexports.NativeSDKGlobalKey = 'MobileBridgeNative';\nexports.JSON_RPC_VERSION = '2.0';\nexports.JSON_RPC_KEY = 'jsonrpc';\n// 通信超时时间\nexports.EXPIRE_DURATION = 3000;\nexports.NOTIFY_PREFIX = 'notify';\n// 检测通路的时隔\nexports.HEARTBEAT_DURATION = 1000;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RES_CODE = void 0;\nexports.RES_CODE = {\n    success: 0\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAllUserAgent = exports.isIframeEnv = exports.isResponse = exports.isNotify = exports.isRequest = void 0;\nfunction isRequest(msgObj) {\n    var requestKeys = ['jsonrpc', 'id', 'method', 'params'];\n    // 检查是否符合所有的 IRequest Key\n    return requestKeys.every(function (requestKey) {\n        return msgObj.hasOwnProperty(requestKey);\n    });\n}\nexports.isRequest = isRequest;\nfunction isNotify(msgObj) {\n    var notifyKeys = ['jsonrpc', 'id', 'event'];\n    // 检查是否符合所有的 IRequest Key\n    return notifyKeys.every(function (requestKey) {\n        return msgObj.hasOwnProperty(requestKey);\n    });\n}\nexports.isNotify = isNotify;\nfunction isResponse(msgObj) {\n    var responseKeys = ['jsonrpc', 'id', 'errCode'];\n    // 检查是否符合所有的 IRequest Key\n    return responseKeys.every(function (requestKey) {\n        return msgObj.hasOwnProperty(requestKey);\n    });\n}\nexports.isResponse = isResponse;\nfunction isIframeEnv() {\n    return window.self !== window.top;\n}\nexports.isIframeEnv = isIframeEnv;\n/**\n * 获取当前平台以及应用信息\n */\nfunction getAllUserAgent() {\n    var ua = window.navigator.userAgent.toLowerCase();\n    return {\n        // 平台UA\n        android: ua.includes('android'),\n        ios: ua.includes('iphone') || ua.includes('ipad'),\n        windows: ua.includes('windows'),\n        ubuntu: ua.includes('ubuntu'),\n        mac: ua.includes('mac'),\n    };\n}\nexports.getAllUserAgent = getAllUserAgent;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MobileBridge_1 = require(\"./MobileBridge\");\nvar constant_1 = require(\"./constant\");\nvar api_1 = require(\"./api\");\n// 绑定到全局\nwindow[constant_1.SDK_NAME] = MobileBridge_1.default;\nwindow[constant_1.TEST_API_KEY] = api_1.default;\nexports.default = MobileBridge_1.default;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(109);\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();"],"sourceRoot":""}